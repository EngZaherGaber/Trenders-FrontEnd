<div class="big-container">
  <form [formGroup]="form">
    <div class="info">
      <mat-tab-group dynamicHeight="true">
        <mat-tab label="User Info">
          <div class="user-info">
            <mat-card class="btn-div" formGroupName="user_info">
              <mat-form-field>
                <mat-label>Username</mat-label>
                <input matInput formControlName="username" />
                <mat-error
                  *ngIf="
                    form.controls.user_info.controls.username.invalid &&
                    form.controls.user_info.controls.username.touched
                  "
                  >{{ getUsernameErrorMessage() }}</mat-error
                >
              </mat-form-field>

              <mat-form-field>
                <mat-label>Email</mat-label>
                <input matInput formControlName="email" />
                <mat-error
                  *ngIf="
                    form.controls.user_info.controls.email.invalid &&
                    form.controls.user_info.controls.email.touched
                  "
                  >{{ getEmailErrorMessage() }}</mat-error
                >
              </mat-form-field>

              <mat-form-field>
                <mat-label>password</mat-label>
                <input
                  matInput
                  type="password"
                  formControlName="password"
                  [type]="!hide ? 'password' : 'text'"
                />
                <div
                  class="like-btn"
                  mat-icon-button
                  matSuffix
                  (click)="hide = !hide"
                  [attr.aria-label]="'Hide password'"
                  [attr.aria-pressed]="hide"
                >
                  <mat-icon color="primary">{{
                    !hide ? "visibility_off" : "visibility"
                  }}</mat-icon>
                </div>
                <mat-error
                  *ngIf="
                    form.controls.user_info.controls.password.invalid &&
                    form.controls.user_info.controls.password.touched
                  "
                  >{{ getPasswordErrorMessage() }}</mat-error
                >
              </mat-form-field>

              <mat-form-field>
                <mat-label>Confirm password</mat-label>
                <input
                  formControlName="confirm"
                  matInput
                  type="password"
                  #confirmP
                  name="confirm"
                  required
                  [type]="!hideConfirm ? 'password' : 'text'"
                />
                <div
                  class="like-btn"
                  mat-icon-button
                  matSuffix
                  (click)="hideConfirm = !hideConfirm"
                  [attr.aria-label]="'Hide password'"
                  [attr.aria-pressed]="hide"
                >
                  <mat-icon color="primary">{{
                    !hideConfirm ? "visibility_off" : "visibility"
                  }}</mat-icon>
                </div>
                <mat-error
                  *ngIf="form.controls.user_info.controls.confirm.invalid"
                  >{{ getConfirmErrorMessage() }}</mat-error
                >
              </mat-form-field>

              <div class="action-div">
                <button type="button" mat-raised-button color="accent">
                  Preivous
                </button>
                <button
                  type="button"
                  mat-raised-button
                  color="primary"
                  [disabled]="
                    form.controls.user_info.controls.username.invalid ||
                    form.controls.user_info.controls.email.invalid ||
                    form.controls.user_info.controls.password.invalid ||
                    form.controls.user_info.controls.confirm.invalid
                  "
                >
                  Next
                </button>
              </div>
            </mat-card>
          </div>
        </mat-tab>
        <mat-tab label="Company Info">
          <div class="type-info" formGroupName="other_info">
            <mat-card class="btn-div">
              <mat-form-field>
                <mat-label>Categories</mat-label>
                <mat-select formControlName="categories" multiple>
                  <mat-option
                    *ngFor="let catgeory of Lcategories$ | async"
                    [value]="catgeory.id"
                    >{{ catgeory.name }}</mat-option
                  >
                </mat-select>
              </mat-form-field>
              <mat-form-field>
                <mat-label>Created Date</mat-label>
                <input
                  matInput
                  [matDatepicker]="picker"
                  placeholder="YYYY"
                  formControlName="createdDate"
                  #inpyeardate
                  hidden
                />
                <input matInput [value]="inpyeardate.value.slice(6)" />
                <mat-hint>YYYY</mat-hint>
                <mat-datepicker-toggle
                  matIconSuffix
                  [for]="picker"
                ></mat-datepicker-toggle>
                <mat-datepicker
                  #picker
                  (yearSelected)="onYearSelected($event, picker)"
                  startView="multi-year"
                  yearSelect="true"
                  [panelClass]="'year-picker'"
                ></mat-datepicker>
              </mat-form-field>
              <mat-form-field>
                <mat-label>City</mat-label>
                <mat-select formControlName="address">
                  <mat-option
                    *ngFor="let item of Lcities$ | async"
                    [value]="item"
                    >{{ item }}</mat-option
                  >
                </mat-select>
                <mat-error
                  *ngIf="
                    form.controls.other_info.controls.address.invalid &&
                    form.controls.other_info.controls.address.touched
                  "
                  >{{ getAddressErrorMessage() }}</mat-error
                >
              </mat-form-field>
              <mat-form-field
                *ngIf="this.form.controls.other_info.value.address !== ''"
              >
                <mat-label>Address</mat-label>
                <input
                  (change)="changeAddress($event)"
                  matInput
                  name="address"
                  required
                />
              </mat-form-field>
              <div class="action-div">
                <button type="button" mat-raised-button>Preivous</button>
                <button
                  type="button"
                  mat-raised-button
                  color="primary"
                  [disabled]="
                    form.controls.user_info.controls.username.invalid ||
                    form.controls.user_info.controls.email.invalid ||
                    form.controls.other_info.controls.categories.invalid ||
                    form.controls.other_info.controls.createdDate.invalid ||
                    form.controls.other_info.controls.address.invalid ||
                    form.controls.user_info.controls.type.invalid ||
                    form.controls.user_info.controls.password.invalid
                  "
                >
                  <!-- (click)="submit()" -->
                  Submit
                </button>
              </div>
            </mat-card>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>
  </form>
</div>
